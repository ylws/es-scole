"use strict";function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var _extends=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},_createClass=function(){function t(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(i,e,a){return e&&t(i.prototype,e),a&&t(i,a),i}}(),CFCMScole=function(){function t(i){_classCallCheck(this,t),this.initVal(i)}return _createClass(t,[{key:"getId",value:function(t){return document.getElementById(t)}},{key:"getClassAll",value:function(t){return document.querySelectorAll(t)}},{key:"remove",value:function(t){var i=t.parentNode;i&&i.removeChild(t)}},{key:"parents",value:function(t,i){return t.className==i?t:(t=t.parentNode,this.parents(t,i))}},{key:"initVal",value:function(t,i){var e={starid:"star0",star:".star",starbg:".starbg",init:{starnum:5,wid:0,val:0,totalscole:100,totalwid:100},callback:!1,disabled:!1,type:"auto"};if(this.cfg={},_extends(this.cfg,e,t),this.cfg.disabled)return!1;this.initCommonVal()}},{key:"initCommonVal",value:function(){var t=this,i=void 0,e=void 0;if(i=e=this.cfg.flag=!1,0==this.getClassAll(this.cfg.star).length)return console.log("该页面没有评分项"),!1;void 0==this.cfg.init.wid?this.cfg.init.wid=0:this.cfg.init.wid,void 0==this.cfg.init.val?this.cfg.init.val=0:this.cfg.init.val,void 0==this.cfg.init.starnum?this.cfg.init.starnum=5:this.cfg.init.starnum;var a=this.cfg.init.totalwid/this.cfg.init.starnum,c=this.getId(this.cfg.starid);c.setAttribute("style","width:"+t.cfg.init.totalwid+"px;background-size:"+a+"px ");var s=c.querySelector(t.cfg.starbg);s.setAttribute("style","width:"+t.cfg.init.wid+"px;background-size:"+a+"px "),navigator.userAgent.match(/(iPhone|Android|iPad|Mobile|uc)/i)?(t.cfg.PstarbgObj=s,t.cfg.Pstarwid=a,t.cfg.Pitem=c,c.addEventListener("touchstart",function(){t.touchStart(t)},!1),c.addEventListener("touchmove",function(){t.touchMove(t)},!1),c.addEventListener("touchend",function(){t.touchEnd(t)},!1)):t.pcEvent(c,i,e,s,a)}},{key:"pcEvent",value:function(t,i,e,a,c){var s=this;t.onmousedown=function(t){var n=window.event||t;n.preventDefault?(n.preventDefault(),n.stopPropagation()):n.cancelBubble=!0;var f=n.pageX||n.clientX,l=0,g=this.offsetLeft,o=s.cfg.init.totalwid,r=s.cfg.init.totalwid/s.cfg.init.totalscole,d=s.cfg.init.wid;(e=!0)&&(document.onmousemove=function(t){i=!0;var e=window.event||t;e.preventDefault?(e.preventDefault(),e.stopPropagation()):e.cancelBubble=!0;var n=(l=e.pageX||e.clientX)-f+d;switch(n>=o&&(n=o),n<=0&&(n=0),s.cfg.type){case"half":var g=(n/c).toString().split(".")[1];void 0!==g?1*g.substr(0,1)>5?s.cfg.init.wid=c*Math.ceil(n/c):s.cfg.init.wid=c*Math.ceil(n/c)-c/2:s.cfg.init.wid=c*Math.round(n/c),s.cfg.init.val=s.cfg.init.wid/r,a.style.width=s.cfg.init.wid+"px";break;case"all":s.cfg.init.wid=c*Math.ceil(n/c),s.cfg.init.val=s.cfg.init.wid/r,a.style.width=s.cfg.init.wid+"px";break;default:s.cfg.init.wid=n,s.cfg.init.val=n/r,a.style.width=n+"px"}},document.onmouseup=function(t){if(e=!1,document.onmousemove=null,i)i=!1;else{var n=window.event||t;n.preventDefault?(n.preventDefault(),n.stopPropagation()):n.cancelBubble=!0;var f=(n.pageX||n.clientX)-g;switch(s.cfg.type){case"half":var l=(f/c).toString().split(".")[1];void 0!==l?1*l.substr(0,1)>5?s.cfg.init.wid=c*Math.ceil(f/c):s.cfg.init.wid=c*Math.ceil(f/c)-c/2:s.cfg.init.wid=c*Math.round(f/c),s.cfg.init.val=s.cfg.init.wid/r,a.style.width=s.cfg.init.wid+"px";break;case"all":s.cfg.init.wid=c*Math.ceil(f/c),s.cfg.init.val=s.cfg.init.wid/r,a.style.width=s.cfg.init.wid+"px";break;default:s.cfg.init.wid=f,s.cfg.init.val=f/r,a.style.width=f+"px"}}"function"==typeof s.cfg.callback&&s.cfg.callback(s.cfg.init),document.onmouseup=null})}}},{key:"touchStart",value:function(t){var i=window.event||t;i.preventDefault(),i.stopPropagation(),window.touch=i.touches[0];var e=Number(touch.pageX);this.cfg.PstartX=e,this.cfg.PlastX=e,this.cfg.PonepxToscole=this.cfg.init.totalwid/this.cfg.init.totalscole,this.cfg.Pdowninitx=this.cfg.init.wid,this.cfg.Pitemoffsetx=this.cfg.Pitem.offsetLeft,this.cfg.Pmflag=!1}},{key:"touchMove",value:function(t){var i=window.event||t;i.preventDefault(),i.stopPropagation(),this.cfg.Pmflag=!0;var e=i.touches[0];this.cfg.PlastX=Number(e.pageX);var a=this.cfg.PlastX-this.cfg.PstartX+this.cfg.Pdowninitx;switch(a>=this.cfg.init.totalwid&&(a=this.cfg.init.totalwid),a<=0&&(a=0),this.cfg.type){case"half":var c=(a/this.cfg.starwid).toString().split(".")[1];void 0!==c?1*c.substr(0,1)>5?this.cfg.init.wid=this.cfg.starwid*Math.ceil(a/this.cfg.starwid):this.cfg.init.wid=this.cfg.starwid*Math.ceil(a/this.cfg.starwid)-this.cfg.starwid/2:this.cfg.init.wid=this.cfg.starwid*Math.round(a/this.cfg.starwid),this.cfg.init.val=this.cfg.init.wid/this.cfg.PonepxToscole,this.cfg.PstarbgObj.style.width=this.cfg.init.wid+"px";break;case"all":this.cfg.init.wid=this.cfg.starwid*Math.ceil(a/this.cfg.starwid),this.cfg.init.val=this.cfg.init.wid/this.cfg.PonepxToscole,this.cfg.PstarbgObj.style.width=this.cfg.init.wid+"px";break;default:this.cfg.init.wid=a,this.cfg.init.val=a/this.cfg.PonepxToscole,this.cfg.PstarbgObj.style.width=a+"px"}}},{key:"touchEnd",value:function(t){var i=window.event||t;if(i.preventDefault(),i.stopPropagation(),this.cfg.Pmflag)this.cfg.Pmflag=!1;else{var e=this.cfg.PlastX-this.cfg.Pitemoffsetx;switch(e>=this.cfg.init.totalwid&&(e=this.cfg.init.totalwid),e<=0&&(e=0),this.cfg.type){case"half":var a=(e/starwid).toString().split(".")[1];void 0!==a?1*a.substr(0,1)>5?this.cfg.init.wid=starwid*Math.ceil(e/starwid):this.cfg.init.wid=starwid*Math.ceil(e/starwid)-starwid/2:this.cfg.init.wid=starwid*Math.round(e/starwid),this.cfg.init.val=this.cfg.init.wid/this.cfg.PonepxToscole,this.cfg.PstarbgObj.style.width=this.cfg.init.wid+"px";break;case"all":this.cfg.init.wid=starwid*Math.ceil(e/starwid),this.cfg.init.val=this.cfg.init.wid/this.cfg.PonepxToscole,this.cfg.PstarbgObj.style.width=this.cfg.init.wid+"px";break;default:this.cfg.init.wid=e,this.cfg.init.val=e/this.cfg.PonepxToscole,this.cfg.PstarbgObj.style.width=e+"px"}}"function"==typeof this.cfg.callback&&this.cfg.callback(this.cfg.init)}},{key:"onchange",value:function(t){console.log(t);var i=this,e=this.cfg.init.totalwid/this.cfg.init.totalscole,a=this.getId(this.cfg.starid).querySelector(i.cfg.starbg),c=e*t;switch(i.cfg.type){case"half":var s=(c/starwid).toString().split(".")[1];void 0!==s?1*s.substr(0,1)>5?i.cfg.init.wid=starwid*Math.ceil(c/starwid):i.cfg.init.wid=starwid*Math.ceil(c/starwid)-starwid/2:i.cfg.init.wid=starwid*Math.round(c/starwid),i.cfg.init.val=i.cfg.init.wid/e,a.style.width=i.cfg.init.wid+"px";break;case"all":i.cfg.init.wid=starwid*Math.ceil(c/starwid),i.cfg.init.val=i.cfg.init.wid/e,a.style.width=i.cfg.init.wid+"px";break;default:i.cfg.init.wid=c,i.cfg.init.val=c/e,a.style.width=c+"px"}}}]),t}();
export function CFCMScole(param, fn) {
		return new CFCMScole(param, fn)
	}